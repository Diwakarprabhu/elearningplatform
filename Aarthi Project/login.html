<!DOCTYPE html>
<html>
<head>
  <title>Teacher Login</title>

  <style>
      *{
      box-sizing:border-box;
    }

    body{
      font-family:'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #0f172a, #1e1b4b, #020617);
      height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      margin:0;
    }

    .box{
      background: linear-gradient(180deg, #020617, #020617);
      width:350px;
      padding:30px 25px;
      border-radius:16px;
      text-align:center;
      box-shadow:
        0 20px 50px rgba(0,0,0,0.8),
        inset 0 0 0 1px rgba(255,255,255,0.05);
      animation:fadeIn 0.8s ease;
    }

    h2{
      margin-bottom:8px;
      color:#e5e7eb;
      font-weight:600;
      letter-spacing:0.5px;
    }

    .subtitle{
      font-size:13px;
      color:#9ca3af;
      margin-bottom:22px;
    }

    input{
      width:100%;
      padding:13px;
      margin:10px 0;
      border-radius:10px;
      border:1px solid #1f2937;
      background:#020617;
      color:#e5e7eb;
      font-size:15px;
      transition:0.3s;
    }

    input::placeholder{
      color:#6b7280;
    }

    input:focus{
      outline:none;
      border-color:#6366f1;
      box-shadow:0 0 0 3px rgba(99,102,241,0.25);
    }

    button{
      width:100%;
      padding:13px;
      margin-top:18px;
      border-radius:10px;
      border:none;
      background: linear-gradient(135deg, #6366f1, #4f46e5);
      color:white;
      font-size:16px;
      font-weight:500;
      cursor:pointer;
      transition:0.3s;
    }

    button:hover{
      transform:translateY(-1px);
      box-shadow:0 12px 25px rgba(99,102,241,0.5);
    }

    @keyframes fadeIn{
      from{
        opacity:0;
        transform:translateY(25px);
      }
      to{
        opacity:1;
        transform:translateY(0);
      }
    }
  </style>
</head>
<body>

<div class="box">
  <h2>Teacher Login</h2>

  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">

  <!-- IMPORTANT: function name -->
  <button onclick="loginUser()">Login</button>
</div>

<!-- Supabase CDN -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>


<script>
const SUPABASE_URL = "https://tehrflzjvyhlagxbrljc.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRlaHJmbHpqdnlobGFneGJybGpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg2OTQ2MjQsImV4cCI6MjA4NDI3MDYyNH0.wxBIEKXya0CU_-GA-6dSeWI6wS8HPwx4gmsV976MEIk";   // paste anon key


const supabaseClient = window.supabase.createClient(
  SUPABASE_URL,
  SUPABASE_KEY
);
async function loginUser(){
  const u = document.getElementById("username").value;
  const p = document.getElementById("password").value;

  if(!u || !p){
    alert("Fill all fields");
    return;
  }

  const { data, error } = await supabaseClient
    .from("teachers")
    .select("*")
    .eq("username", u)
    .eq("password", p)
    .single();

  if(error || !data){
    alert("Invalid username or password");
    return;
  }

  // ✅ SAVE SESSION (IMPORTANT)
  localStorage.setItem("user", JSON.stringify({
    id: data.id,
    username: data.username,
    role: "teacher"
  }));

  // ✅ REDIRECT
  window.location.href = "teacher.html";
}

</script>

</body>
</html>
